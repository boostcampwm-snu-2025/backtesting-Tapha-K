## 1주차
- 기획 문서 저장: 이번 주식 백테스팅 서비스 기획 내용은 week1 폴더 내의 'WIKI_week1' 파일에 정리해두었습니다.

## 2주차
- n8n을 활용한 리뷰 요약 워크플로우 작성
    - reports 폴더에 노드들을 json으로 저장해두었고, PR 수를 줄여서 실행해보니 'REVIEW_mock.md' 파일로 요약본이 만들어져서 워크플로우 자체에는 문제가 없는 것을 확인했습니다.
    - 그러나 마지막 요약본 생성에서 LLM한테 한번에 너무 많은 input을 넣어서 중간에 잘리는 바람에 요약이 안 되었기에, 구조를 1차: 리뷰 수집, 2차: 10개씩 요약, 3차: 최종 요약으로 변경할 예정입니다.
    - 본격적으로 요약본을 생성하기 전에 프롬프트 개선이 필요할 지 점검이 필요해보입니다.
    - Github에서 달린 comment 수보다 n8n node가 가져오는 item 수가 적어서 PR 별 review와 comment를 전부 가져오는 방식으로 해보았습니다. 그러나 이 두 노드가 리뷰들을 전부 가져오고 있는지 확인할 방법이 output json을 다 읽어보는 것 말고 생각이 안 나서, 요약본이 만들어지니까 잘 가져오고 있겠지 하는 마음으로 넘어간 상태입니다.

- 스케치 및 설계 문서 저장: 스케치, 기획서 및 주신 리뷰를 바탕으로 작성한 설계 내용은 week2 폴더 내의 'WIKI_week2' 파일에 정리해두었습니다. 'Demo.xlsx'로 만들고 'tableconvert.com'에서 변환하였습니다.

- 데모 범위 설정
    - 'AI를 이용한 백테스팅 및 분석'으로 한정하였습니다. 이에 따라서 설계 파일에 있는 모든 세부 task까지 구현하지는 않을 것 같습니다.
    - '내 전략' 페이지의 UI는 대략적으로 구성하고 AI를 활용한 분석 서비스 구현에 집중할 예정입니다.
    - '리더보드' 페이지는 비어있는 페이지로 두고 이동할 수 있게만 만들 예정입니다.

- 생각해 본 기술적 어려움
    - 백테스팅 로직 구현
        - 메인 서버는 지금까지 하던대로 express로 하되, 백테스팅을 수행하는 서버를 추가하고 python에 있는 'backtrader' 라이브러리 사용함.
        - 분석 당일의 매매 가격을 시가/종가 중 하나로 택하면 오차가 있을 수 있으므로 당일은 제외함.
        - 액면분할, 배당락 등의 사건에 대한 수정 주가를 처리해야 함.
    - 백테스팅 엔진 성능
        - for문 대신에 행렬 연산으로 성능을 높여야 함.
        - 동시성 제어를 통해서 python 서버의 부하를 줄여야 함.
    - LLM 제어
        - JSON 포맷을 강제로 해서 정리해도, 가끔은 설명 텍스트 등을 붙일 때가 있음. 따라서 프롬프트 엔지니어링 이외에도 output parsing 중에 문제가 생기면 다시 요청하는 방어로직이 필요함.
        - 모호한 전략 요청에 대해서 임의로 파라미터를 정하지 않고, 사용자에게 다시 확인하는 작업을 거쳐야 함.
    - 아키텍처 통신 비용
        - csv 로그 파일의 용량이 매우 클 수 있으니, python 서버가 파일을 업로드하고 웹에서 URL을 통해 다운받을 수 있게 고려함.


## 3주차
- AI 기반 전략 생성
    - Natural Language Processing: "골든크로스 발생 시 매수하고 RSI 70 이상일 때 매도해줘"와 같은 자연어 프롬프트를 입력하면 AI가 이를 분석합니다.
    - Structured JSON Output: Gemini API의 JSON Mode를 활용하여 모호한 텍스트를 정형화된 설정값(기간, 대상 시장, 섹터, 파라미터)으로 변환합니다.
    - Context-Aware Parsing:
        - 사용자가 기간이나 섹터를 명시하지 않으면 기존 설정을 유지하는 Partial Update 로직 적용.
        - KOSPI, NASDAQ 등 시장 상황에 맞는 올바른 섹터명 자동 매핑.

- 동적 파라미터 관리
    - Parameter Library: 추세(Trend), 변동성(Volatility), 모멘텀(Oscillator) 등 다양한 보조지표 라이브러리를 구축했습니다.
    - Flexible Interaction:
        - AI가 제안한 파라미터가 자동으로 UI에 반영됩니다.
        - UI ID System: 동일한 지표(예: 5일 이평선, 20일 이평선)를 중복해서 사용할 수 있도록, 프론트엔드 레벨에서 고유 식별자(_ui_id)를 부여하여 독립적인 수정/삭제를 지원합니다.
        - 라이브러리 모달을 통해 수동으로 지표를 추가하거나 삭제할 수 있습니다.

- 백테스팅 시뮬레이션
    - Mock Engine: 현재는 데모 버전으로, 사전에 정의된 10가지 시장 시나리오(급등장, 하락장, 횡보장 등) 중 랜덤한 결과를 반환하여 시각화합니다.
    - Visualization:
        - 일별 자산 변동 차트 시각화.
        - 핵심 지표(수익률, 승률, MDD) 계산 및 대시보드 표시.

- 전략 아카이빙
    - CRUD Operations: 생성한 전략을 이름/설명과 함께 저장, 조회, 삭제할 수 있습니다.
    - Detailed View: 저장된 전략 카드를 클릭하면 설정했던 파라미터와 당시의 백테스팅 결과를 모달 형태로 상세하게 조회할 수 있습니다.

- AI 심층 분석 리포트
    - Generative Analysis: 단순한 수치 나열이 아닌, 거시 경제(Macro)와 기술적 분석이 결합된 서술형 리포트를 제공합니다.
    - Context Injection: 저장된 전략의 Config(기간, 파라미터)와 Result(수익률, MDD)를 프롬프트에 주입하여, AI가 "왜 이 전략이 이 기간에 성공/실패했는지"를 회고합니다.
    - Multi-Modal Architecture: 파싱용 AI(JSON 모드)와 분석용 AI(Text 모드) 인스턴스를 분리하여 최적의 응답 포맷을 구현했습니다.

- Demo 영상(소리 포함) Youtube URL
    - https://youtu.be/6KGUgtGzF20