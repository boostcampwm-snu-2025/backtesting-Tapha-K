|                            | 요약                                              | 1. 화면에 보이는 변할 수 있는 모든 것을 찾기 (when)<br>2. 그때의 화면 변화와 생기는 부수 효과 (then)<br>3. 조건에 따라서 같은 when일 때 then이 달라지면 given |                                                                                                                                                           |
|----------------------------|-------------------------------------------------|----------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
|                            |                                                 |                                                                                                                |                                                                                                                                                           |
|                            | 데모 범위                                           | AI에 매매 전략을 입력하면<br>파라미터가 전략에 맞게 세팅된 후에 <br>백테스팅 진행하고 결과 출력                                                     |                                                                                                                                                           |
|                            |                                                 |                                                                                                                |                                                                                                                                                           |
| Story (사용자 목표)             | Given (선행 조건/상황)                                | When (사용자의 행동)                                                                                                 | Then (시스템의 반응/결과)                                                                                                                                         |
| 1. 기간 설정 (Period)          |                                                 | 'Period' 영역의 '+' 버튼을 클릭한다.                                                                                     | Period' 입력창 및 시작일과 종료일을 선택할 수 있는 달력(Date Picker) UI가 포함된 섹터가 팝업된다.<br>'+' 버튼이 '-'버튼으로 토글된다.                                                               |
|                            |                                                 | 'Period' 영역의 '-' 버튼을 클릭한다.                                                                                     | Period' 섹터가 닫힌다.<br>'-' 버튼이 '+'버튼으로 토글된다.                                                                                                                 |
|                            |                                                 | 시작 날짜를 클릭한다.                                                                                                   | 1. 해당 날짜가 시작일로 지정되고 하이라이트 된다.<br>2. 종료 날짜보다 늦으면 테두리를 붉게 바꿔서 경고한다.                                                                                         |
|                            |                                                 | 종료 날짜를 클릭한다.                                                                                                   | 1. 해당 날짜가 종료일로 지정된다.<br>2.  'Period' 입력창에 'YYYY.MM.DD ~ YYYY.MM.DD' 형태로 텍스트가 업데이트된다.<br>3. 'n개월' 버튼들이 활성화된다.<br>4. 시작 날짜보다 앞서면 테두리를 붉게 바꿔서 경고한다.          |
|                            | 종료 날짜가 정해친 상태                                   | 'n개월' 버튼 중 하나를 누른다.                                                                                            | 종료 날짜를 기준으로 n개월만큼 떨어진 시작 날짜를 설정한다.                                                                                                                        |
|                            |                                                 |                                                                                                                |                                                                                                                                                           |
| 2. 시장/자산군 선택 (Market Type) |                                                 | 'Market Type' 영역의 '+' 버튼을 클릭한다.                                                                                | Market Type을 선택할 수 있는 섹터, 선택 가능한 시장 목록(KOSPI, KOSDAQ, NASDAQ, Crypto 등)이 팝업된다. <br>'+' 버튼이 '-'버튼으로 토글된다.                                                  |
|                            |                                                 | 'Market Type' 영역의 '-' 버튼을 클릭한다.                                                                                | Market Type을 선택할 수 있는 섹터가 닫힌다. <br>'-' 버튼이 '+'버튼으로 토글된다.                                                                                                  |
|                            |                                                 | 시장(예: NASDAQ)을 선택한다.                                                                                           | 1. Market Type 텍스트가 변경된다.<br>2. 하위 'Sector' 영역의 선택 가능한 항목들이 해당 시장에 맞춰 초기화/변경된다.                                                                           |
|                            |                                                 |                                                                                                                |                                                                                                                                                           |
| 3. 섹터/종목 지정 (Sector)       |                                                 | 'Sector' 영역의 '+' 버튼을 클릭한다.                                                                                     | Sector을 선택할 수 있는 섹터, 선택 가능한 섹터 목록(반도체, 제약, IT 등)이 팝업된다. <br>'+' 버튼이 '-'버튼으로 토글된다.                                                                         |
|                            |                                                 | 'Sector' 영역의 '-' 버튼을 클릭한다.                                                                                     | Sector을 선택할 수 있는 섹터가 닫힌다. <br>'-' 버튼이 '+'버튼으로 토글된다.                                                                                                       |
|                            |                                                 | 특정 섹터 체크박스를 추가하고 값을 입력한다.                                                                                      | 1. 선택된 섹터가 태그 형태로 'Sector' 박스 안에 표시된다.<br>2. 백테스팅 대상 종목군이 변경된다.<br>3. 값이 유효하지 않으면 테두리를 붉게 바꿔서 경고한다.                                                       |
|                            |                                                 | 특정 섹터 체크박스를 제거한다.                                                                                              | 1. 'Sector' 박스 안에 있던 선택된 섹터가 삭제된다.<br>2. 백테스팅 대상 종목군이 변경된다.                                                                                               |
|                            |                                                 |                                                                                                                |                                                                                                                                                           |
| 4. 초기화                     |                                                 | 초기화 버튼을 누른다.                                                                                                   | 정말 초기화할 건지 묻는 모달창을 띄운다.                                                                                                                                   |
|                            |                                                 | 초기화 확인 모달창에서 '예'를 누른다.                                                                                         | Period/MarketType/Sector에서 정해진 값들이 빈 값으로 돌아간다.                                                                                                            |
|                            |                                                 | 초기화 확인 모달창에서 '아니오'를 누른다.                                                                                       | 그냥 모달창이 닫힌다.                                                                                                                                              |
|                            |                                                 |                                                                                                                |                                                                                                                                                           |
| 5. AI 전략 프롬프트 입력 (Prompt)  |                                                 | 'Prompt' 입력창을 클릭한다.                                                                                            | 커서가 활성화되고 입력 가능한 상태가 된다.<br>Placeholder 내용이 사라진다.                                                                                                         |
|                            |                                                 | 매매 전략을 자연어로 입력한다 (예: ""골든크로스 시 매수"").                                                                          | 텍스트가 입력된다.                                                                                                                                                |
|                            |                                                 | '전략 생성(Generate)' 버튼을 누른다.                                                                                     | 1. 로딩 애니메이션(AI 분석 중)이 표시된다.<br> 2. Period, Market Type, Sector, Parameters 영역의 값들이 AI가 분석한 내용으로 자동 채워진다.<br> 3. Prompt 창 하단에 '전략이 적용되었습니다' 토스트 메시지가 뜬다.   |
|                            | 매매 전략이 모호한 경우                                   | '전략 생성(Generate)' 버튼을 누른다.                                                                                     | 파라미터 생성 대신에 Prompt 창 하단에 모호한 기준에 대해서 보완해 달라는 텍스트를 출력한다.                                                                                                   |
|                            | 매매와 관련없는 내용을 입력한 경우                             | '전략 생성(Generate)' 버튼을 누른다.                                                                                     | 파라미터 생성 대신에 Prompt 창 하단에 '주식 투자 전략에 대해서만 답변할 수 있습니다.' 를 출력한다.                                                                                             |
|                            |                                                 |                                                                                                                |                                                                                                                                                           |
| 6. 백테스팅 실행                 | Period, MarketType, Sector의<br>값들이 채워져 있지 않은 상태 | 'BackTesting' 버튼이 비활성화 되어있다.                                                                                   |                                                                                                                                                           |
|                            | Period, MarketType, Sector의<br>값들이 채워져 있는 상태    | 'BackTesting' 버튼을 누른다.                                                                                         | 1. 로딩 애니메이션(백테스팅 실행 중)이 표시되고, 'BackTesting' 버튼을 비활성화하고 'Stop' 버튼을 활성화한다.<br>2. 로직(혹은 AI에게 맡김)에 따라 백테스트를 하고  매매 과정을 csv 파일로 추출한다.<br>3. 결과(수익률, 승률)을 출력한다. |
|                            | 백테스팅이 실패한 경우                                    | 'BackTesting' 버튼을 누른다.                                                                                         | 로딩이 멈추고 결과 부분에 '분석에 실패했습니다'와 실패 이유(데이터 부족, 서버 오류 등)를 출력한다.                                                                                                |
|                            |                                                 | 백테스팅 중 파라미터 수정                                                                                                 | 무시하고 계속 진행한다.                                                                                                                                             |
|                            |                                                 | 'Stop' 버튼을 누른다                                                                                                 | 1. 현재 진행 중인 분석을 멈춘다.<br>2. 'BackTesting' 버튼을 활성화한다.                                                                                                       |
|                            |                                                 | 'csv Download' 버튼을 누른다.                                                                                        | 백테스트 과정과 결과를 csv 파일로 출력한다.                                                                                                                                |
|                            |                                                 | 'Save' 버튼을 누른다.                                                                                                | 전략 이름/전략 소개를 입력할 수 있는 모달창을 띄운다.                                                                                                                           |
|                            |                                                 | 'Save' 모달창에 전략 이름/소개를 입력하고 '저장'을 누른다.                                                                          | Server의 전략 저장소에 전달되어 저장된다.                                                                                                                                |
|                            |                                                 |                                                                                                                |                                                                                                                                                           |
| 7. 페이지 변경                  |                                                 | 우측 상단 '메인 페이지' 버튼을 누른다                                                                                         | '메인 페이지'로 라우팅한다.                                                                                                                                          |
|                            |                                                 | 우측 상단 '내 전략' 버튼을 누른다                                                                                           | '내 전략'으로 라우팅한다.                                                                                                                                           |
|                            |                                                 | 우측 상단 '리더보드' 버튼을 누른다                                                                                           | '리더보드'로 라우팅한다.                                                                                                                                            |
|                            |                                                 |                                                                                                                |                                                                                                                                                           |
| 8. 전략 확인 및 AI 분석           |                                                 | 각 전략 별 카드를 누른다                                                                                                 | 해당 카드가 확대되고 상세 내용 모달을 팝업한다.                                                                                                                               |
|                            |                                                 | 'LLM 분석' 버튼을 누른다                                                                                               | 차트 분석, 거시 경제, 파라미터 설정(과도, 비정상 범위, 상충조건) 등을 기반으로 LLM이 분석한 결과를 출력한다.                                                                                        |
|                            | 분석에 실패한 경우                                      | 'LLM 분석' 버튼을 누른다                                                                                               | AI 분석을 불러오지 못했습니다' 텍스트를 출력한다.                                                                                                                             |
|                            |                                                 |                                                                                                                |                                                                                                                                                           |
